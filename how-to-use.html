<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>EPANET: How to Use the Toolkit</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EPANET
   &#160;<span id="projectnumber">2.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('how-to-use.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">How to Use the Toolkit </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The following topics briefly describe how to accomplish some basic tasks for which the Toolkit would be used. See the Example Applications topic for code listings of complete applications of the Toolkit.</p>
<h1><a class="anchor" id="open-close"></a>
Opening and Closing the Toolkit</h1>
<p>The Toolkit must open an EPANET [Input File](Input-File) to obtain a description of the pipe network to be analyzed before any of its other functions can be called. (The exception to this is the <a class="el" href="epanet2_8h.html#a2130dc995bcd225daf607ee48209f6f8">ENepanet</a> function, which performs a complete hydraulic/water quality simulation similar to a command line execution of EPANET). Once all analysis is completed, it must close itself down to free all allocated memory. The functions for doing this are <a class="el" href="group___file_management.html#ga2394e28ac7bc9f7f58eb4b3f0f8360e3">ENopen</a> and <a class="el" href="group___file_management.html#ga1ddeebd799e15ebb7bda261a0f139919">ENclose</a>, respectively. An example of using these functions is shown below.</p>
<div class="fragment"><div class="line"><span class="keywordtype">char</span> *f1,  <span class="comment">// Name of input file  </span></div>
<div class="line">     *f2,  <span class="comment">// name of report file </span></div>
<div class="line">     *f3;  <span class="comment">// name of output file (can be blank) </span></div>
<div class="line"><span class="keywordtype">int</span>  errcode; </div>
<div class="line">errcode = <a class="code" href="group___file_management.html#ga2394e28ac7bc9f7f58eb4b3f0f8360e3">ENopen</a>(f1, f2, f3); </div>
<div class="line"><span class="keywordflow">if</span> (errcode &gt; 0) { </div>
<div class="line">  <a class="code" href="group___file_management.html#ga1ddeebd799e15ebb7bda261a0f139919">ENclose</a>(); </div>
<div class="line">  <span class="keywordflow">return</span>; </div>
<div class="line">} </div>
<div class="line">{ Call functions that perform desired analysis } </div>
<div class="line"><a class="code" href="group___file_management.html#ga1ddeebd799e15ebb7bda261a0f139919">ENclose</a>();</div>
</div><!-- fragment --><h1><a class="anchor" id="parameters"></a>
Retrieving and Setting Network Parameters</h1>
<p>The Toolkit has various functions available for retrieving and setting the parameters that define the design and operation of the pipe network being analyzed. The names of retrieval functions all begin with <code>ENget</code> (e.g., [ENgetnodevalue](ENgetnodevalue), [ENgetoption](ENgetoption), etc.) while the functions used for setting parameter values begin with <code>ENset</code> (e.g., [ENsetnodevalue](ENsetnodevalue), [ENsetoption](ENsetoption), etc.).</p>
<p>Most of these functions use an index number to reference a specific network component (such as a node, link, or time pattern). This number is simply the position of the component in the list of all components of similar type (e.g., node 10 is the tenth node, starting from 1, in the network) and is not the same as the ID label assigned to the component in the Input File being processed. A series of functions exist to determine a component's index number given its ID label (see [ENgetlinkindex](ENgetlinkindex), [ENgetnodeindex](ENgetnodeindex), and [ENgetpatternindex](ENgetpatternindex)). Likewise, functions exist to retrieve a component's ID label given its index number (see [ENgetlinkid](ENgetlinkid), [ENgetnodeid](ENgetnodeid), and [ENgetpatternid](ENgetpatternid)). The [ENgetcount](ENgetcount) function can be used to determine the number of different components in the network.</p>
<p>The code below is an example of using the parameter retrieval and setting functions. It changes all pipes with diameter of 10 inches to 12 inches.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span>   i, Nlinks; </div>
<div class="line"><span class="keywordtype">float</span> D; </div>
<div class="line"><a class="code" href="group___network_info.html#gabbd9a5fbf7e381d259b19b6210510e27">ENgetcount</a>(<a class="code" href="epanet2_8h.html#a9fab0d1b11a0670601f9bc4dfa670105a66006e6a72fc550164d89316f7f07eb7">EN_LINKCOUNT</a>, &amp;Nlinks); </div>
<div class="line"><span class="keywordflow">for</span> (i = 1; i &lt;= Nlinks; i++) { </div>
<div class="line">  <a class="code" href="epanet2_8h.html#a8153e94ac8d464eef603f7f286db3af4">ENgetlinkvalue</a>(i, EN_DIAMETER, &amp;D); </div>
<div class="line">  <span class="keywordflow">if</span> (D == 10) <a class="code" href="epanet2_8h.html#a131920a3c33585a47d6b8c058b9cfcf4">ENsetlinkvalue</a>(i, EN_DIAMETER, 12); </div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">EPANET Open Source</a></li><li class="navelem"><a class="el" href="toolkit-overview.html">Toolkit Overview</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
